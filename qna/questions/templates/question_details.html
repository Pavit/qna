<!DOCTYPE html>
<html>
<head>
  {% load staticfiles %}
  <title>Poll Charts</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF8">
  <link rel="stylesheet" href="{% static 'dave/css/poll.css' %}" />
</head>
<body>
<h3>Sunburst Charts</h3>

<div class="pollChart" id="sunburst"></div>
<script src="{% static 'dave/javascripts/d3.js' %}"></script>
<script src="{% static 'dave/javascripts/underscore.js' %}"></script>
<script>
    (function(){
        var pollChart, showSunburst;

        require("init");

        pollChart = window.pollChart;

        showSunburst = function(data) {
            d3.select("#sunburst").html("");
            pollChart.sunburst({
                el: "#sunburst",
                src: data,
                fields: ["gender", "agegroup", "political"],
                labels: ["Gender", "Age Group", "Politics"],
                width: 600,
                height: 600,
                colors: ["#FFF5E4", "#FF7E65", "#7DCDFC", "#2084C4", "#3D444B"],
                margin: {
                    top: 10,
                    right: 10,
                    bottom: 10,
                    left: 10
                }
            });
        };

        d3.select("form select").on("change", function() {
            showSunburst({{json|safe}});
        });
        showSunburst({{json|safe}});

    })();



</script>



</body>
</html>